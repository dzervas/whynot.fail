<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Cause when you fail, somebody has to laugh at you"><title>MicroPython on Bluefruit NRF52832 with J-Link and openocd | WhyNot.Fail</title><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><!-- RSS --><link rel="alternate" type="application/rss+xml" title="WhyNot.Fail RSS" href="/rss.xml"><style>.tag-list[data-astro-cid-lga65v7i]{display:flex;flex-wrap:wrap;gap:.5rem;list-style:none;padding:0;margin:0}.tag[data-astro-cid-lga65v7i]{display:inline-block;padding:.25rem .625rem;font-size:.8125rem;font-weight:500;text-decoration:none;color:var(--color-accent);background:var(--color-accent-bg);border:1px solid var(--color-accent-border);border-radius:4px;transition:all .15s ease}.tag[data-astro-cid-lga65v7i]:hover{background:var(--color-accent);color:var(--color-bg);border-color:var(--color-accent)}.build-badge[data-astro-cid-mzimu5gx]{display:inline-flex;align-items:center;font-family:JetBrains Mono,monospace;font-size:.8125rem;letter-spacing:.02em}.badge-prefix[data-astro-cid-mzimu5gx]{color:var(--color-text-muted)}.badge-status[data-astro-cid-mzimu5gx]{font-weight:600}.badge-passing[data-astro-cid-mzimu5gx] .badge-status[data-astro-cid-mzimu5gx]{color:var(--color-success)}.badge-failing[data-astro-cid-mzimu5gx] .badge-status[data-astro-cid-mzimu5gx]{color:var(--color-danger)}.badge-unknown[data-astro-cid-mzimu5gx] .badge-status[data-astro-cid-mzimu5gx]{color:var(--color-warning)}
</style>
<link rel="stylesheet" href="/_astro/_slug_.BSLznIs-.css">
<link rel="stylesheet" href="/_astro/_slug_.ClLXJwUM.css"></head> <body id="top"> <div class="site-wrapper"> <header class="site-header" data-astro-cid-3ef6ksr2> <div class="header-inner" data-astro-cid-3ef6ksr2> <a href="/" class="logo" aria-label="WhyNot.Fail" data-astro-cid-3ef6ksr2> <pre class="ascii-logo" aria-hidden="true" data-astro-cid-3ef6ksr2>
 ‚ñà   ‚ñà ‚ñà ‚ñà ‚ñà ‚ñà ‚ñà‚ñÑ ‚ñà ‚ñà‚ñÄ‚ñà ‚ñÄ‚ñà‚ñÄ
 ‚ñà‚ñÑ‚ñà‚ñÑ‚ñà ‚ñà‚ñÄ‚ñà ‚ñÄ‚ñà‚ñÄ ‚ñà ‚ñÄ‚ñà ‚ñà‚ñÑ‚ñà  ‚ñà
        ¬∑FAIL¬∑
      </pre> <span class="logo-tagline" data-astro-cid-3ef6ksr2>// cause_when_you_fail_somebody_has_to_laugh_at_you</span> </a> <div class="header-actions" data-astro-cid-3ef6ksr2> <nav class="nav-main" aria-label="Main navigation" data-astro-cid-3ef6ksr2> <ul class="nav-list" data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/" class="nav-link" data-astro-cid-3ef6ksr2> Home </a> </li><li data-astro-cid-3ef6ksr2> <a href="/about/" class="nav-link" data-astro-cid-3ef6ksr2> About </a> </li><li data-astro-cid-3ef6ksr2> <a href="/tags/" class="nav-link" data-astro-cid-3ef6ksr2> Tags </a> </li> </ul> </nav> <div class="search-shell" data-search-trigger data-astro-cid-3ef6ksr2> <input type="search" class="search-trigger" placeholder="Search" aria-label="Open search" readonly data-astro-cid-3ef6ksr2> <span class="search-shortcut" data-astro-cid-3ef6ksr2>Ctrl+K</span> </div> </div> </div> <div class="header-separator" aria-hidden="true" data-astro-cid-3ef6ksr2></div> </header>  <main class="main-content">  <article class="post" data-astro-cid-gjtny2mx> <header class="post-header" data-astro-cid-gjtny2mx> <div class="post-header-top" data-astro-cid-gjtny2mx> <a href="/" class="back-link" data-astro-cid-gjtny2mx> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-arrow-left "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> <span data-astro-cid-gjtny2mx>Back to posts</span> </a>  </div> <div class="post-meta" data-astro-cid-gjtny2mx> <time datetime="2020-04-22T00:00:00.000Z" data-astro-cid-gjtny2mx>22 April 2020</time> <span class="meta-sep" data-astro-cid-gjtny2mx>/</span> <span class="post-author" data-astro-cid-gjtny2mx>dzervas</span>  <span class="meta-sep" data-astro-cid-gjtny2mx>/</span> <span class="build-badge badge-passing" data-astro-cid-mzimu5gx> <span class="badge-prefix" data-astro-cid-mzimu5gx>build:</span> <span class="badge-status" data-astro-cid-mzimu5gx>[PASS]</span> </span>   </div> <h1 class="post-title" data-astro-cid-gjtny2mx>MicroPython on Bluefruit NRF52832 with J-Link and openocd</h1> <div class="post-tags" data-astro-cid-gjtny2mx> <ul class="tag-list" data-astro-cid-lga65v7i><li data-astro-cid-lga65v7i><a href="/tags/notes/" class="tag" data-astro-cid-lga65v7i>notes</a></li><li data-astro-cid-lga65v7i><a href="/tags/hardware/" class="tag" data-astro-cid-lga65v7i>hardware</a></li></ul> </div> </header>  <div class="post-content" data-astro-cid-gjtny2mx>  <p>First of all, lets flash Adafruit‚Äôs NRF52 bootloader for easier future flashing</p>
<p>My J-Link was ‚ÄúBroken. No longer used‚Äù - or so the JLink tools said (AKA bought from e-bay). So I had to go to <a href="http://openocd.org/">openocd</a>).</p>
<p>Connect the J-Link (or any SWD capable debugger supported by openocd - even an FT232 breakout will do) to the target - I have a Bluefruit by Adafruit.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">pip3</span><span style="color:#9ECBFF"> install</span><span style="color:#79B8FF"> --user</span><span style="color:#9ECBFF"> intelhex</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> Adafruit_nRF52_Bootloader</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> clone</span><span style="color:#9ECBFF"> https://github.com/adafruit/Adafruit_nRF52_Bootloader</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> submodule</span><span style="color:#9ECBFF"> update</span><span style="color:#79B8FF"> --init</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> BOARD=feather_nrf52832</span><span style="color:#9ECBFF"> all</span></span>
<span class="line"><span style="color:#E1E4E8">FIRMWARE</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">lib/softdevice/s132_nrf52_6.1.1/s132_nrf52_6.1.1_softdevice.hex</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> openocd</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> board/nordic_nrf52_dk.cfg</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> init</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> ‚Äúreset</span><span style="color:#9ECBFF"> init‚Äù</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> halt</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> ‚Äúnrf5</span><span style="color:#9ECBFF"> mass_erase‚Äù</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> ‚Äúprogram</span><span style="color:#E1E4E8"> $FIRMWARE </span><span style="color:#9ECBFF">verify‚Äù</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> reset</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> exit</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">FIRMWARE</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">_build/build-feather_nrf52832/feather_nrf52832_bootloader-0.3.2-28-g79a6a0c-nosd.hex</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> openocd</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> board/nordic_nrf52_dk.cfg</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> init</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> ‚Äúreset</span><span style="color:#9ECBFF"> init‚Äù</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> halt</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> ‚Äúprogram</span><span style="color:#E1E4E8"> $FIRMWARE </span><span style="color:#9ECBFF">verify‚Äù</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> reset</span><span style="color:#79B8FF"> -c</span><span style="color:#9ECBFF"> exi</span></span></code></pre>
<blockquote data-callout="info" class="callout callout-info">
<p>üí° <strong>NOTE</strong>: <code>nrf5</code> command was missing from my package manager‚Äôs <code>openocd</code> and I needed to install the git version!</p>
</blockquote>
<p>Now the bootloader should be flash and we‚Äôre able to flash over serial from now on! Lets flash micropython (I advise not flashing master but a stable tag)</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> clone</span><span style="color:#9ECBFF"> https://github.com/micropython/micropython</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> micropython/ports/nrf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">./drivers/bluetooth/download_ble_stack.sh</span></span>
<span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> BOARD=feather52</span><span style="color:#9ECBFF"> SD=s132</span><span style="color:#9ECBFF"> FROZEN_MPY_DIR=freeze</span><span style="color:#9ECBFF"> all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">pip</span><span style="color:#9ECBFF"> install</span><span style="color:#79B8FF"> --user</span><span style="color:#9ECBFF"> adafruit-nrfutil</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">adafruit-nrfutil</span><span style="color:#9ECBFF"> dfu</span><span style="color:#9ECBFF"> genpkg</span><span style="color:#79B8FF"> --dev-type</span><span style="color:#79B8FF"> 0x0052</span><span style="color:#79B8FF"> --application</span><span style="color:#9ECBFF"> build-feather52-s132/firmware.hex</span><span style="color:#9ECBFF"> firmware.zip</span></span>
<span class="line"><span style="color:#B392F0">adafruit-nrfutil</span><span style="color:#9ECBFF"> dfu</span><span style="color:#9ECBFF"> serial</span><span style="color:#79B8FF"> --package</span><span style="color:#9ECBFF"> firmware.zip</span><span style="color:#79B8FF"> -p</span><span style="color:#9ECBFF"> /dev/ttyUSB0</span><span style="color:#79B8FF"> -b</span><span style="color:#79B8FF"> 115200</span></span></code></pre>
<p>Done!</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">dzervas</span><span style="color:#9ECBFF"> nr</span><span style="color:#E1E4E8">f</span><span style="color:#F97583">></span><span style="color:#9ECBFF"> miniterm.py</span><span style="color:#79B8FF"> --raw</span><span style="color:#9ECBFF"> /dev/ttyUSB0</span><span style="color:#79B8FF"> 115200</span></span>
<span class="line"><span style="color:#B392F0">---</span><span style="color:#9ECBFF"> Miniterm</span><span style="color:#9ECBFF"> on</span><span style="color:#9ECBFF"> /dev/ttyUSB0</span><span style="color:#9ECBFF">  115200,8,N,1</span><span style="color:#79B8FF"> ---</span></span>
<span class="line"><span style="color:#B392F0">---</span><span style="color:#9ECBFF"> Quit:</span><span style="color:#9ECBFF"> Ctrl+]</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> Menu:</span><span style="color:#9ECBFF"> Ctrl+T</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> Help:</span><span style="color:#9ECBFF"> Ctrl+T</span><span style="color:#9ECBFF"> followed</span><span style="color:#9ECBFF"> by</span><span style="color:#9ECBFF"> Ctrl+H</span><span style="color:#79B8FF"> ---</span></span>
<span class="line"><span style="color:#B392F0">MicroPython</span><span style="color:#9ECBFF"> v1.12-dirty</span><span style="color:#9ECBFF"> on</span><span style="color:#9ECBFF"> 2020-04-23</span><span style="color:#E1E4E8">; </span><span style="color:#B392F0">Bluefruit</span><span style="color:#9ECBFF"> nRF52</span><span style="color:#9ECBFF"> Feather</span><span style="color:#9ECBFF"> with</span><span style="color:#9ECBFF"> NRF52832</span></span>
<span class="line"><span style="color:#B392F0">Type</span><span style="color:#9ECBFF"> "help()"</span><span style="color:#9ECBFF"> for</span><span style="color:#9ECBFF"> more</span><span style="color:#9ECBFF"> information.</span></span>
<span class="line"><span style="color:#E1E4E8">>>></span></span></code></pre>
<p>If you want to play with other kind of firmware (Rust/C/whatever) and you have to flash ELF or <code>hex</code> files, here is a little helper (put it on your <code>.bashrc</code> or <code>.zshrc</code>):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> adafruit-nrfutil-hex</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	port</span><span style="color:#F97583">=</span><span style="color:#FFAB70">${1}</span></span>
<span class="line"><span style="color:#E1E4E8">	file</span><span style="color:#F97583">=</span><span style="color:#FFAB70">${2}</span></span>
<span class="line"><span style="color:#F97583">	if</span><span style="color:#E1E4E8"> [ </span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">$#</span><span style="color:#9ECBFF">"</span><span style="color:#F97583"> -ne</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8"> ]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#79B8FF">	    echo</span><span style="color:#9ECBFF"> "Usage: </span><span style="color:#79B8FF">$0</span><span style="color:#9ECBFF"> &#x3C;port> &#x3C;hex_file>"</span></span>
<span class="line"><span style="color:#F97583">	    return</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">	fi</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	if</span><span style="color:#E1E4E8"> [ </span><span style="color:#9ECBFF">"$(</span><span style="color:#B392F0">file</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}" </span><span style="color:#F97583">|</span><span style="color:#B392F0"> cut</span><span style="color:#79B8FF"> -d</span><span style="color:#9ECBFF">' ' </span><span style="color:#79B8FF">-f</span><span style="color:#79B8FF"> 2</span><span style="color:#9ECBFF">)"</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "ELF"</span><span style="color:#E1E4E8"> ]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#79B8FF">	    echo</span><span style="color:#9ECBFF"> "[+] Converting ELF file to hex"</span></span>
<span class="line"><span style="color:#B392F0">	    objcopy</span><span style="color:#79B8FF"> -O</span><span style="color:#9ECBFF"> ihex</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}.hex"</span></span>
<span class="line"><span style="color:#E1E4E8">	    file</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}.hex"</span></span>
<span class="line"><span style="color:#F97583">	fi</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#79B8FF">	echo</span><span style="color:#9ECBFF"> "[+] Generating package"</span></span>
<span class="line"><span style="color:#B392F0">	adafruit-nrfutil</span><span style="color:#9ECBFF"> dfu</span><span style="color:#9ECBFF"> genpkg</span><span style="color:#79B8FF"> --dev-type</span><span style="color:#79B8FF"> 0x0052</span><span style="color:#79B8FF"> --application</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}"</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}.zip"</span></span>
<span class="line"><span style="color:#79B8FF">	echo</span><span style="color:#9ECBFF"> "[+] Flashing package over UART"</span></span>
<span class="line"><span style="color:#B392F0">	adafruit-nrfutil</span><span style="color:#79B8FF"> --verbose</span><span style="color:#9ECBFF"> dfu</span><span style="color:#9ECBFF"> serial</span><span style="color:#79B8FF"> --package</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">file</span><span style="color:#9ECBFF">}.zip"</span><span style="color:#79B8FF"> --port</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">port</span><span style="color:#9ECBFF">}"</span><span style="color:#79B8FF"> --baudrate</span><span style="color:#79B8FF"> 115200</span><span style="color:#79B8FF"> --singlebank</span><span style="color:#79B8FF"> --touch</span><span style="color:#79B8FF"> 1200</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>  </div> <footer class="post-footer" data-astro-cid-gjtny2mx> <div class="footer-sep" aria-hidden="true" data-astro-cid-gjtny2mx></div> <div class="author-card" data-astro-cid-gjtny2mx> <img src="https://www.gravatar.com/avatar/c9ccfe62d2de0aebdb79a1e7cf5c7019?s=100&d=identicon" alt="dzervas" class="author-avatar" width="64" height="64" data-astro-cid-gjtny2mx> <div class="author-info" data-astro-cid-gjtny2mx> <p class="author-label" data-astro-cid-gjtny2mx>// written_by</p> <p class="author-name" data-astro-cid-gjtny2mx>dzervas</p> <p class="author-bio" data-astro-cid-gjtny2mx>Creator of this site and lover of fails.</p> </div> </div> </footer> </article>  </main> <footer class="site-footer" data-astro-cid-sz7xmlte> <div class="footer-separator" aria-hidden="true" data-astro-cid-sz7xmlte></div> <div class="footer-inner" data-astro-cid-sz7xmlte> <div class="footer-main" data-astro-cid-sz7xmlte> <nav class="footer-social" aria-label="Social links" data-astro-cid-sz7xmlte> <ul class="social-list" data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a href="https://kafeneio.social/@dzervas" class="social-link" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-mastodon "><path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.432 4.014.535c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.41 2.405 1.228l.518.869.519-.869c.533-.818 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558z"/></svg> <span class="social-label" data-astro-cid-sz7xmlte>Mastodon</span> </a> </li><li data-astro-cid-sz7xmlte> <a href="https://github.com/dzervas/whynot.fail" class="social-link" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg> <span class="social-label" data-astro-cid-sz7xmlte>GitHub</span> </a> </li><li data-astro-cid-sz7xmlte> <a href="/rss.xml" class="social-link" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-rss "><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg> <span class="social-label" data-astro-cid-sz7xmlte>RSS Feed</span> </a> </li> </ul> </nav> </div> </div> </footer>  <nav class="webring" aria-label="Webring"> <a class="webring-link edge-link webring-link--prev" href="https://webring.stavros.io/prev"> <span class="webring-arrow" aria-hidden="true">&lt;</span> <span class="webring-label">Previous blog</span> </a> <a class="webring-link edge-link webring-link--next" href="https://webring.stavros.io/next"> <span class="webring-arrow" aria-hidden="true">&gt;</span> <span class="webring-label">Next blog</span> </a> </nav> <a class="back-to-top edge-link" href="#top" data-back-to-top> <span class="webring-arrow back-to-top-arrow" aria-hidden="true">^</span> <span class="webring-label back-to-top-label">Top</span> </a> </div> <div class="search-overlay" data-search-overlay hidden> <div class="search-backdrop" data-search-close></div> <div class="search-panel" role="dialog" aria-modal="true" aria-label="Search"> <header class="search-header"> <input type="search" class="search-input" placeholder="Search posts..." aria-label="Search posts" data-search-input> <button class="search-close" type="button" aria-label="Close search" data-search-close>
&times;
</button> </header> <div class="search-results" data-search-results> <p class="search-empty">Type something and hit Enter. Or just panic.</p> </div> </div> </div>  <script type="module">const e=document.querySelector("[data-back-to-top]"),t=document.querySelector(".site-footer"),r=()=>{e instanceof HTMLElement&&e.toggleAttribute("data-visible",window.scrollY>240)},o=()=>{if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))return;const n=t.getBoundingClientRect().height;e.style.setProperty("--footer-height",`${n}px`)};r();o();window.addEventListener("scroll",r,{passive:!0});window.addEventListener("resize",o,{passive:!0});window.addEventListener("load",o,{passive:!0});t&&new ResizeObserver(o).observe(t);</script> <script type="module">const y={cdnUrl:"https://cdn.jsdelivr.net/npm/lunr/lunr.min.js"},c=document.querySelector("[data-search-overlay]"),r=document.querySelector("[data-search-results]"),i=document.querySelector("[data-search-input]"),w=document.querySelectorAll("[data-search-close]"),g=document.querySelector("[data-search-trigger]");c&&(c.hidden=!0);let l=null,u=[],o=null,s=-1;const L=()=>new Promise((e,t)=>{if(window.lunr){e(window.lunr);return}const n=document.createElement("script");n.src=y.cdnUrl,n.async=!0,n.onload=()=>{window.lunr?e(window.lunr):t(new Error("Lunr CDN loaded without window.lunr"))},n.onerror=()=>t(new Error("Failed to load Lunr CDN")),document.head.appendChild(n)}),E=async()=>o||(o=await L(),o),k=e=>e.length===0?'<p class="search-empty">No matches. Try a different incantation.</p>':(e.length>10?e.slice(0,10):e).map((n,a)=>{const d=n.tags.slice(0,3).map(m=>`<span class="search-tag">${m}</span>`).join("");return`
        <a class="search-item${a===s?" is-active":""}" data-search-item href="${n.slug}">
          <span class="search-title">${n.title}</span>
          <span class="search-description">${n.description}</span>
          <span class="search-tags">${d}</span>
        </a>
      `}).join(""),p=()=>{!c||!i||(c.hidden=!1,document.body.classList.add("search-open"),i.value="",s=-1,r&&(r.innerHTML='<p class="search-empty">Type something and hit Enter. Or just panic.</p>'),window.setTimeout(()=>i.focus(),0))},h=()=>{c&&(c.hidden=!0,document.body.classList.remove("search-open"))},v=async()=>{if(l)return;u=await(await fetch("/search.json")).json(),l=(await E())(function(){this.ref("slug"),this.field("title"),this.field("description"),this.field("tags"),this.field("category"),u.forEach(n=>this.add(n))})},A=async e=>{if(!r)return[];if(await v(),!l)return[];const n=l.search(e).slice(0,25).map(a=>u.find(d=>d.slug===a.ref)).filter(a=>!!a);return r.innerHTML=k(n),n},f=e=>{if(!r)return;const t=Array.from(r.querySelectorAll("[data-search-item]"));t.length!==0&&(s=(s+e+t.length)%t.length,t.forEach((n,a)=>{n.classList.toggle("is-active",a===s)}),t[s].scrollIntoView({block:"nearest"}))},C=()=>{if(!r)return;const e=Array.from(r.querySelectorAll("[data-search-item]"));e.length===0||s<0||e[s].click()},S=e=>{if((e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="k"){e.preventDefault(),p();return}if(e.key==="Escape"){h();return}!c||c.hidden||((e.key==="ArrowDown"||e.key.toLowerCase()==="j")&&(e.preventDefault(),f(1)),(e.key==="ArrowUp"||e.key.toLowerCase()==="k")&&(e.preventDefault(),f(-1)),e.key==="Enter"&&(e.preventDefault(),C()))};i&&i.addEventListener("input",e=>{const t=e.target.value.trim();if(t.length===0){s=-1,r&&(r.innerHTML='<p class="search-empty">Type something and hit Enter. Or just panic.</p>');return}A(t).then(()=>{s=-1,r&&r.querySelectorAll("[data-search-item]").forEach(a=>a.classList.remove("is-active"))})});w.forEach(e=>e.addEventListener("click",h));g?.addEventListener("click",p);document.addEventListener("keydown",S);document.addEventListener("click",e=>{const t=e.target;(t.matches("[data-search-close]")||t.closest("[data-search-close]"))&&h()});const j=document.documentElement;j.classList.add("js-enabled");</script> </body> </html>  