<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Cause when you fail, somebody has to laugh at you"><title>Dry your filaments in the drawer | WhyNot.Fail</title><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><!-- RSS --><link rel="alternate" type="application/rss+xml" title="WhyNot.Fail RSS" href="/rss.xml"><style>.tag-list[data-astro-cid-lga65v7i]{display:flex;flex-wrap:wrap;gap:.5rem;list-style:none;padding:0;margin:0}.tag[data-astro-cid-lga65v7i]{display:inline-block;padding:.25rem .625rem;font-size:.8125rem;font-weight:500;text-decoration:none;color:var(--color-accent);background:var(--color-accent-bg);border:1px solid var(--color-accent-border);border-radius:4px;transition:all .15s ease}.tag[data-astro-cid-lga65v7i]:hover{background:var(--color-accent);color:var(--color-bg);border-color:var(--color-accent)}.build-badge[data-astro-cid-mzimu5gx]{display:inline-flex;align-items:center;font-family:JetBrains Mono,monospace;font-size:.8125rem;letter-spacing:.02em}.badge-prefix[data-astro-cid-mzimu5gx]{color:var(--color-text-muted)}.badge-status[data-astro-cid-mzimu5gx]{font-weight:600}.badge-passing[data-astro-cid-mzimu5gx] .badge-status[data-astro-cid-mzimu5gx]{color:var(--color-success)}.badge-failing[data-astro-cid-mzimu5gx] .badge-status[data-astro-cid-mzimu5gx]{color:var(--color-danger)}.badge-unknown[data-astro-cid-mzimu5gx] .badge-status[data-astro-cid-mzimu5gx]{color:var(--color-warning)}
</style>
<link rel="stylesheet" href="/_astro/_slug_.BSLznIs-.css">
<link rel="stylesheet" href="/_astro/_slug_.ClLXJwUM.css"></head> <body id="top"> <div class="site-wrapper"> <header class="site-header" data-astro-cid-3ef6ksr2> <div class="header-inner" data-astro-cid-3ef6ksr2> <a href="/" class="logo" aria-label="WhyNot.Fail" data-astro-cid-3ef6ksr2> <pre class="ascii-logo" aria-hidden="true" data-astro-cid-3ef6ksr2>
 ‚ñà   ‚ñà ‚ñà ‚ñà ‚ñà ‚ñà ‚ñà‚ñÑ ‚ñà ‚ñà‚ñÄ‚ñà ‚ñÄ‚ñà‚ñÄ
 ‚ñà‚ñÑ‚ñà‚ñÑ‚ñà ‚ñà‚ñÄ‚ñà ‚ñÄ‚ñà‚ñÄ ‚ñà ‚ñÄ‚ñà ‚ñà‚ñÑ‚ñà  ‚ñà
        ¬∑FAIL¬∑
      </pre> <span class="logo-tagline" data-astro-cid-3ef6ksr2>// cause_when_you_fail_somebody_has_to_laugh_at_you</span> </a> <div class="header-actions" data-astro-cid-3ef6ksr2> <nav class="nav-main" aria-label="Main navigation" data-astro-cid-3ef6ksr2> <ul class="nav-list" data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/" class="nav-link" data-astro-cid-3ef6ksr2> Home </a> </li><li data-astro-cid-3ef6ksr2> <a href="/about/" class="nav-link" data-astro-cid-3ef6ksr2> About </a> </li><li data-astro-cid-3ef6ksr2> <a href="/tags/" class="nav-link" data-astro-cid-3ef6ksr2> Tags </a> </li> </ul> </nav> <div class="search-shell" data-search-trigger data-astro-cid-3ef6ksr2> <input type="search" class="search-trigger" placeholder="Search" aria-label="Open search" readonly data-astro-cid-3ef6ksr2> <span class="search-shortcut" data-astro-cid-3ef6ksr2>Ctrl+K</span> </div> </div> </div> <div class="header-separator" aria-hidden="true" data-astro-cid-3ef6ksr2></div> </header>  <main class="main-content">  <article class="post" data-astro-cid-gjtny2mx> <header class="post-header" data-astro-cid-gjtny2mx> <div class="post-header-top" data-astro-cid-gjtny2mx> <a href="/" class="back-link" data-astro-cid-gjtny2mx> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-arrow-left "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> <span data-astro-cid-gjtny2mx>Back to posts</span> </a>  </div> <div class="post-meta" data-astro-cid-gjtny2mx> <time datetime="2021-01-26T00:00:00.000Z" data-astro-cid-gjtny2mx>26 January 2021</time> <span class="meta-sep" data-astro-cid-gjtny2mx>/</span> <span class="post-author" data-astro-cid-gjtny2mx>dzervas</span>  <span class="meta-sep" data-astro-cid-gjtny2mx>/</span> <span class="build-badge badge-passing" data-astro-cid-mzimu5gx> <span class="badge-prefix" data-astro-cid-mzimu5gx>build:</span> <span class="badge-status" data-astro-cid-mzimu5gx>[PASS]</span> </span>   </div> <h1 class="post-title" data-astro-cid-gjtny2mx>Dry your filaments in the drawer</h1> <div class="post-tags" data-astro-cid-gjtny2mx> <ul class="tag-list" data-astro-cid-lga65v7i><li data-astro-cid-lga65v7i><a href="/tags/3d-printing/" class="tag" data-astro-cid-lga65v7i>3d-printing</a></li></ul> </div> </header> <div class="post-hero" data-astro-cid-gjtny2mx> <img src="/images/notion-3fc7c475-8d95-4ba6-a2a4-190de0058e49-1a4e4dbf-30ef-4196-8780-09c05f3851bc.jpg" alt="Dry your filaments in the drawer" loading="lazy" data-astro-cid-gjtny2mx> </div> <div class="post-content" data-astro-cid-gjtny2mx>  <p>This is a weekend project to keep your filaments safe &#x26; dry. It‚Äôs very easy to rebuild and adapt to your needs with (hopefully) available spare parts.</p>
<p>After a long term abusive relationship with the 3D printing hobby, where I was brutally murdered several times as described <a href="/factory/things-that-went-wrong-with-my-ender-3/">here</a>, it was finally time to find a good partner and settle down. I bought the Original Prusa MK3S. I can finally print dickbutts using plastic. The printer just works, there‚Äôs nothing more to add.</p>
<p><img src="/images/notion-3d9cc19b-140e-4739-bb68-731ec40346a9-1a1ff1fb-250b-48bc-a1aa-fe6da47cb05c.jpg" alt="1a1ff1fb-250b-48bc-a1aa-fe6da47cb05c.jpg"></p>
<p>Prusa holding a poker face after the Ender 3 told it what it went through</p>
<p>But getting through so much, I can now fully appreciate my printer and do the best I can to keep it happy and a big part of that is to buy good quality filament (I use Prusament and Devil Design) and keep it dry (around 20% humidity and below 60C, for almost all filaments and materials).</p>
<h2 id="how-to-keep-the-filament-dry">How to keep the filament dry</h2>
<p>There are many ready made solutions to keep your filaments dry. Either purpose-built <a href="https://www.printdry.com/">filament dryers</a> or generic vertical food dehydrators to dry a filament before use or after misplacing it inside your pool, but they don‚Äôt take care of the permanent/long term storage.</p>
<p>There are also filament containers, which take care of storage as well. This is the most used type as you just set the target humidity and forget it. Of course there are both <a href="https://www.printdry.com/">ready made</a> storage solutions and <a href="https://blog.prusaprinters.org/dryboxes-and-alternative-spool-holders-not-only-for-multimaterial-upgrade_30525/">DIY</a>.</p>
<p>Dehydrating filament boils (hehe) down to more or less the following building blocks:</p>
<ul>
<li>Moisture absorbers (silica gel, the small non-edible salt packs that you get with electronics)</li>
<li>Heat - just heat it up and moisture will evaporate</li>
<li>Dehydrator - no idea how they work, so I‚Äôll market it as ‚Äúmagic boxes that lower humidity‚Äù</li>
<li>(There‚Äôs also vacuum that I just learned at the time of writing but not at the time of project planning. More info: <a href="https://www.youtube.com/watch?v=eqQRN9TUw08">https://www.youtube.com/watch?v=eqQRN9TUw08</a>)
I wanted something that integrates with my lab (no random plastic containers here and there) and be dirt cheap with stuff I had around - I had just spent a lot on a new printer and my lab starts to seem like a garbage disposal place from the various random parts I‚Äôve collected over the years for ‚Äúfuture projects‚Äù - lets make this one of them. So it‚Äôs set, I‚Äôll build something on my own.</li>
</ul>
<h2 id="what-do-we-have-around">What do we have around</h2>
<p>The printer was laying on a perfectly sized nightstand and it was a very good fit. The filaments were placed on the first drawer and random prints awaiting use as well as some spare parts were sitting on the second drawer. I just needed to somehow create a controlled climate on the first drawer.</p>
<p>My target was to use as much ‚Äúbuilding blocks‚Äù as possible (aka have around), so heat &#x26; silica gel.</p>
<p>Silica gel requires no further explanation - as packages from all over the world arrive at your house, you‚Äôll gonna build a big stock of them and never run out.</p>
<p>For the heat part though, I took an interesting turn: Use the small heatbed I had when I tried to make a <a href="/factory/plastic-v01/">delta printer</a> and then spent thousands in therapy for PTSD.</p>
<p>The electronics to control the heatbed was the easiest part - I instantly knew I‚Äôd use one of the thousands ESP8266 WeMos Minis I had lying around (I had no need for WiFi or the horsepower, but it‚Äôs a buck each and I had thousands), with a DHT22 temperature &#x26; humidity sensor and probably a screen to have a view on what‚Äôs going on</p>
<p>So the plan was the following:</p>
<ul>
<li>Make the temperature/humidity controller using the ESP</li>
<li>Install the heatbed and wire it to the ESP</li>
<li>Throw in silica gel bags</li>
</ul>
<h2 id="building-the-climate-controller">Building the climate controller</h2>
<p>For this recipe you‚Äôre going to need:</p>
<ul>
<li>WeMos Mini</li>
<li>DHT22 temperature/humidity sensor (the white one, the blue is garbage)</li>
<li>PCD8544 screen (Nokia 3310 screen)</li>
<li>Some wire</li>
<li>(optionally) WeMos Dual Base
Lego time! üôÇ</li>
</ul>
<p>3 minutes later I had both my debugging and (almost) finalized hardware. Yey!</p>
<p><img src="/images/notion-967a2161-7ba8-4f57-b5f6-f6d3662606b9-6ab1063c-a8a3-4b36-83a0-584a05bed0b2.jpg" alt="6ab1063c-a8a3-4b36-83a0-584a05bed0b2.jpg"></p>
<p>Lego for adults</p>
<p>At this point I should point out that you can use the exact same components but not in ‚ÄúWeMos mini shield‚Äù form and use a breadboard, solder on protoboard or even <a href="https://www.stavros.io/posts/make-pcbs-at-home/">make a board with your 3d printer</a>, but I wouldn‚Äôt go that way. Just buy a bunch of WeMos shields from aliexpress for a couple of euros each and never go back. It‚Äôs fun!</p>
<p>I should point out that for no apparent reason, my obsession kicked in and I ‚Äúhad‚Äù to make a shield for the 5V voltage regulator (I wanted to feed from the same 12V line that I was gonna feed the bed) and a ‚Äúbackpack‚Äù shield on the relay that breaks out 2 pins to connect the bed thermistor to. I don‚Äôt know why I didn‚Äôt use a breadboard. My overengineering could not be tamed.</p>
<h2 id="programming-the-climate-controller">Programming the climate controller</h2>
<p>Another cheat mode I used in this project apart from WeMos is <a href="https://esphome.io/">ESPHome</a>. I love this lil fella!</p>
<p>ESPHome is a firmware for the ESP family that transforms it to an IoT device. It‚Äôs the programming equivalent of Lego (TM) for sensor-based projects in YAML. Definitely check it out - it‚Äôs easier than you think and it does not need (but is able to talk to) any other home automation services, devices or bridges.</p>
<p>I say that it‚Äôs a cheat as there‚Äôs no need for WiFi capability per-se (although it‚Äôs nice to watch the humidity on your phone) but I didn‚Äôt NOT want it and ESPHome made the whole project much easier and give the ability to program/update it over the air for free (as in beer, freedom, time, the boobs and the rest). Noice.</p>
<p>The resulting YAML I used (reading the thermistor was a tad tricky and I was stupid enough to lose the forum link that explained it):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">esphome</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">filament_drawer</span></span>
<span class="line"><span style="color:#85E89D">  platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ESP8266</span></span>
<span class="line"><span style="color:#85E89D">  board</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">d1_mini</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">wifi</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  ssid</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Hello"</span></span>
<span class="line"><span style="color:#85E89D">  password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"*****"</span></span>
<span class="line"><span style="color:#6A737D">  # Enable fallback hotspot (captive portal) in case wifi connection fails</span></span>
<span class="line"><span style="color:#85E89D">  ap</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    ssid</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Filament Drawer Fallback Hotspot"</span></span>
<span class="line"><span style="color:#85E89D">    password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"**********"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">captive_portal</span><span style="color:#E1E4E8">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Enable logging</span></span>
<span class="line"><span style="color:#6A737D"># logger:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Enable Home Assistant API</span></span>
<span class="line"><span style="color:#85E89D">api</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"***"</span></span>
<span class="line"><span style="color:#85E89D">ota</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"***"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">font</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">file</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'slkscr.ttf'</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">font1</span></span>
<span class="line"><span style="color:#85E89D">    size</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">file</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'BebasNeue-Regular.ttf'</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">font2</span></span>
<span class="line"><span style="color:#85E89D">    size</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">30</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">file</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'arial.ttf'</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">font3</span></span>
<span class="line"><span style="color:#85E89D">    size</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">12</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">sensor</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">dht</span></span>
<span class="line"><span style="color:#85E89D">    pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D4</span></span>
<span class="line"><span style="color:#85E89D">    model</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">AM2302</span></span>
<span class="line"><span style="color:#85E89D">    temperature</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Filament Drawer Temperature"</span></span>
<span class="line"><span style="color:#85E89D">      id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">filament_temp</span></span>
<span class="line"><span style="color:#85E89D">    humidity</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Filament Drawer Humidity"</span></span>
<span class="line"><span style="color:#85E89D">      id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">filament_hum</span></span>
<span class="line"><span style="color:#85E89D">    update_interval</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">1s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ntc</span></span>
<span class="line"><span style="color:#85E89D">    sensor</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_sensor</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_temp</span></span>
<span class="line"><span style="color:#85E89D">    calibration</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      b_constant</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3950</span></span>
<span class="line"><span style="color:#85E89D">      reference_temperature</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">25¬∞C</span></span>
<span class="line"><span style="color:#85E89D">      reference_resistance</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">100kOhm</span></span>
<span class="line"><span style="color:#6A737D">      # - 100kOhm   -> 25¬∞C</span></span>
<span class="line"><span style="color:#6A737D">      # - 1641.9Ohm -> 150¬∞C</span></span>
<span class="line"><span style="color:#6A737D">      # - 226.15Ohm -> 250¬∞C</span></span>
<span class="line"><span style="color:#85E89D">    name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">HeatBed Temperature</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">resistance</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_sensor</span></span>
<span class="line"><span style="color:#85E89D">    sensor</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_source</span></span>
<span class="line"><span style="color:#85E89D">    configuration</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">UPSTREAM</span></span>
<span class="line"><span style="color:#85E89D">    resistor</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">100kOhm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">adc</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_source</span></span>
<span class="line"><span style="color:#85E89D">    pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">A0</span></span>
<span class="line"><span style="color:#85E89D">    update_interval</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">never</span></span>
<span class="line"><span style="color:#85E89D">    filters</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">multiply</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3.3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">switch</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">gpio</span></span>
<span class="line"><span style="color:#85E89D">    pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D2</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ntc_vcc</span></span>
<span class="line"><span style="color:#85E89D">    restore_mode</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ALWAYS_OFF</span></span>
<span class="line"><span style="color:#85E89D">    internal</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">True</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">gpio</span></span>
<span class="line"><span style="color:#85E89D">    pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D1</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_power</span></span>
<span class="line"><span style="color:#85E89D">    restore_mode</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ALWAYS_OFF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">interval</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">interval</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">0.2s</span></span>
<span class="line"><span style="color:#85E89D">    then</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">switch.turn_on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ntc_vcc</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">component.update</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_source</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">switch.turn_off</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ntc_vcc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">interval</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">1s</span></span>
<span class="line"><span style="color:#85E89D">    then</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">if</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          condition</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            lambda</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'return id(filament_hum).state > 20 and id(filament_temp).state &#x3C; 50 and id(filament_temp).state > 5 and id(heatbed_temp).state &#x3C; 52 and id(heatbed_temp).state > 5;'</span></span>
<span class="line"><span style="color:#85E89D">          then</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">climate.control</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">                id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed</span></span>
<span class="line"><span style="color:#85E89D">                mode</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">AUTO</span></span>
<span class="line"><span style="color:#85E89D">          else</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">climate.control</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">                id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed</span></span>
<span class="line"><span style="color:#85E89D">                mode</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'OFF'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">climate</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">bang_bang</span></span>
<span class="line"><span style="color:#85E89D">    id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed</span></span>
<span class="line"><span style="color:#85E89D">    name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"HeatBed Controller"</span></span>
<span class="line"><span style="color:#85E89D">    sensor</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_temp</span></span>
<span class="line"><span style="color:#85E89D">    default_target_temperature_low</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">28.5¬∞C</span></span>
<span class="line"><span style="color:#85E89D">    default_target_temperature_high</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">30¬∞C</span></span>
<span class="line"><span style="color:#85E89D">    heat_action</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">switch.turn_on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_power</span></span>
<span class="line"><span style="color:#85E89D">    idle_action</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">switch.turn_off</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">heatbed_power</span></span>
<span class="line"><span style="color:#85E89D">    visual</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      min_temperature</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">20¬∞C</span></span>
<span class="line"><span style="color:#85E89D">      max_temperature</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">50¬∞C</span></span>
<span class="line"><span style="color:#85E89D">      temperature_step</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">0.5¬∞C</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">spi</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  clk_pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D5</span></span>
<span class="line"><span style="color:#85E89D">  mosi_pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">display</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">platform</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">pcd8544</span></span>
<span class="line"><span style="color:#85E89D">    reset_pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D0</span></span>
<span class="line"><span style="color:#85E89D">    cs_pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D8</span></span>
<span class="line"><span style="color:#85E89D">    dc_pin</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">D6</span></span>
<span class="line"><span style="color:#85E89D">    update_interval</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">2s</span></span>
<span class="line"><span style="color:#85E89D">    contrast</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">70</span></span>
<span class="line"><span style="color:#85E89D">    lambda</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|-</span></span>
<span class="line"><span style="color:#9ECBFF">      it.printf(18, 0, id(font1), "Filaments");</span></span>
<span class="line"><span style="color:#9ECBFF">      it.printf(14, 4, id(font2), "%.1f%%", id(filament_hum).state);</span></span>
<span class="line"><span style="color:#9ECBFF">      it.printf(0, 34, id(font3), "%.1f¬∞C", id(filament_temp).state);</span></span>
<span class="line"><span style="color:#9ECBFF">      it.printf(42, 34, id(font3), "%.0f¬∞C", id(heatbed_temp).state);</span></span></code></pre>
<h2 id="assembly-of-the-drawer">Assembly of the drawer</h2>
<p>{{% gallery %}}</p>
<p><img src="/images/notion-09e94785-fa09-4347-8bbd-ecc6856aeb24-e723c6d6-9461-4a1e-ae5d-52acf73942c5.jpg" alt="e723c6d6-9461-4a1e-ae5d-52acf73942c5.jpg"></p>
<p><img src="/images/notion-3b851f6f-8fa3-4235-88cb-80633effb17d-97f24523-15f7-4add-a306-7f46df47ae40.jpg" alt="97f24523-15f7-4add-a306-7f46df47ae40.jpg"></p>
<p><img src="/images/notion-5d0ed16b-8fa4-4300-84fe-c6c407b30ef3-b24a5ecd-920b-4314-9fea-49dcb72508cc.jpg" alt="b24a5ecd-920b-4314-9fea-49dcb72508cc.jpg"></p>
<p><img src="/images/notion-a7fb896d-7baf-4585-b318-c8da79f18ba3-7196e71f-592e-49e1-93d1-976b3e64cf29.jpg" alt="7196e71f-592e-49e1-93d1-976b3e64cf29.jpg"></p>
<p><img src="/images/notion-fe766de5-5bed-4e52-9ba5-04c560b71719-7b9dda09-7308-4b9d-bf1c-5fb62611b17a.jpg" alt="7b9dda09-7308-4b9d-bf1c-5fb62611b17a.jpg"></p>
<p><img src="/images/notion-6ccb8095-fbb1-4a1b-b8fe-4ddabc5577b6-23009cda-d366-4255-b4ab-212602cfb598.jpg" alt="23009cda-d366-4255-b4ab-212602cfb598.jpg"></p>
<p><img src="/images/notion-f5ce1e36-c504-4ba5-a4fc-118f575cb012-29238800-6b78-42c2-b587-9cd630694019.jpg" alt="29238800-6b78-42c2-b587-9cd630694019.jpg"></p>
<p>{{% /gallery %}}</p>
<h2 id="so-did-it-work-how-well">So? Did it work? How well?</h2>
<p>It actually did! And pretty well! I wouldn‚Äôt want to change any humidity controlling related stuff. Here are some numbers and graphs to make you believe me:</p>
<p><img src="/images/notion-50687e23-8810-4bbf-980a-320f1a5d9b98-untitled.png" alt="untitled.png"></p>
<p>Yey! Graphs and timelines!</p>
<p>Above you see that as soon as the heatbed temperature raises (top red) ambient temperature humidity falls (bottom red). Top blue is ambient temperature - must be kept below the glass temperature of the materials inside the drawer - in my case 60C for PLA &#x26; PETG.</p>
<p>What I might fix at some point is to remove the upper wood lip to allow me to sit the filaments vertically - right now they‚Äôre sitting horizontally and I can fit 4 of them.</p>
<p>Another thing I‚Äôd like is to swap the relay with a mosfet to avoid that clicking sound - most times I don‚Äôt even hear it but it would be neat, and as I‚Äôm at it design a proper 12V->5V shield.</p>  </div> <footer class="post-footer" data-astro-cid-gjtny2mx> <div class="footer-sep" aria-hidden="true" data-astro-cid-gjtny2mx></div> <div class="author-card" data-astro-cid-gjtny2mx> <img src="https://www.gravatar.com/avatar/c9ccfe62d2de0aebdb79a1e7cf5c7019?s=100&d=identicon" alt="dzervas" class="author-avatar" width="64" height="64" data-astro-cid-gjtny2mx> <div class="author-info" data-astro-cid-gjtny2mx> <p class="author-label" data-astro-cid-gjtny2mx>// written_by</p> <p class="author-name" data-astro-cid-gjtny2mx>dzervas</p> <p class="author-bio" data-astro-cid-gjtny2mx>Creator of this site and lover of fails.</p> </div> </div> </footer> </article>  </main> <footer class="site-footer" data-astro-cid-sz7xmlte> <div class="footer-separator" aria-hidden="true" data-astro-cid-sz7xmlte></div> <div class="footer-inner" data-astro-cid-sz7xmlte> <div class="footer-main" data-astro-cid-sz7xmlte> <nav class="footer-social" aria-label="Social links" data-astro-cid-sz7xmlte> <ul class="social-list" data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a href="https://kafeneio.social/@dzervas" class="social-link" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-mastodon "><path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.432 4.014.535c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.41 2.405 1.228l.518.869.519-.869c.533-.818 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558z"/></svg> <span class="social-label" data-astro-cid-sz7xmlte>Mastodon</span> </a> </li><li data-astro-cid-sz7xmlte> <a href="https://github.com/dzervas/whynot.fail" class="social-link" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg> <span class="social-label" data-astro-cid-sz7xmlte>GitHub</span> </a> </li><li data-astro-cid-sz7xmlte> <a href="/rss.xml" class="social-link" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-rss "><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg> <span class="social-label" data-astro-cid-sz7xmlte>RSS Feed</span> </a> </li> </ul> </nav> </div> </div> </footer>  <nav class="webring" aria-label="Webring"> <a class="webring-link edge-link webring-link--prev" href="https://webring.stavros.io/prev"> <span class="webring-arrow" aria-hidden="true">&lt;</span> <span class="webring-label">Previous blog</span> </a> <a class="webring-link edge-link webring-link--next" href="https://webring.stavros.io/next"> <span class="webring-arrow" aria-hidden="true">&gt;</span> <span class="webring-label">Next blog</span> </a> </nav> <a class="back-to-top edge-link" href="#top" data-back-to-top> <span class="webring-arrow back-to-top-arrow" aria-hidden="true">^</span> <span class="webring-label back-to-top-label">Top</span> </a> </div> <div class="search-overlay" data-search-overlay hidden> <div class="search-backdrop" data-search-close></div> <div class="search-panel" role="dialog" aria-modal="true" aria-label="Search"> <header class="search-header"> <input type="search" class="search-input" placeholder="Search posts..." aria-label="Search posts" data-search-input> <button class="search-close" type="button" aria-label="Close search" data-search-close>
&times;
</button> </header> <div class="search-results" data-search-results> <p class="search-empty">Type something and hit Enter. Or just panic.</p> </div> </div> </div>  <script type="module">const e=document.querySelector("[data-back-to-top]"),t=document.querySelector(".site-footer"),r=()=>{e instanceof HTMLElement&&e.toggleAttribute("data-visible",window.scrollY>240)},o=()=>{if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))return;const n=t.getBoundingClientRect().height;e.style.setProperty("--footer-height",`${n}px`)};r();o();window.addEventListener("scroll",r,{passive:!0});window.addEventListener("resize",o,{passive:!0});window.addEventListener("load",o,{passive:!0});t&&new ResizeObserver(o).observe(t);</script> <script type="module">const y={cdnUrl:"https://cdn.jsdelivr.net/npm/lunr/lunr.min.js"},c=document.querySelector("[data-search-overlay]"),r=document.querySelector("[data-search-results]"),i=document.querySelector("[data-search-input]"),w=document.querySelectorAll("[data-search-close]"),g=document.querySelector("[data-search-trigger]");c&&(c.hidden=!0);let l=null,u=[],o=null,s=-1;const L=()=>new Promise((e,t)=>{if(window.lunr){e(window.lunr);return}const n=document.createElement("script");n.src=y.cdnUrl,n.async=!0,n.onload=()=>{window.lunr?e(window.lunr):t(new Error("Lunr CDN loaded without window.lunr"))},n.onerror=()=>t(new Error("Failed to load Lunr CDN")),document.head.appendChild(n)}),E=async()=>o||(o=await L(),o),k=e=>e.length===0?'<p class="search-empty">No matches. Try a different incantation.</p>':(e.length>10?e.slice(0,10):e).map((n,a)=>{const d=n.tags.slice(0,3).map(m=>`<span class="search-tag">${m}</span>`).join("");return`
        <a class="search-item${a===s?" is-active":""}" data-search-item href="${n.slug}">
          <span class="search-title">${n.title}</span>
          <span class="search-description">${n.description}</span>
          <span class="search-tags">${d}</span>
        </a>
      `}).join(""),p=()=>{!c||!i||(c.hidden=!1,document.body.classList.add("search-open"),i.value="",s=-1,r&&(r.innerHTML='<p class="search-empty">Type something and hit Enter. Or just panic.</p>'),window.setTimeout(()=>i.focus(),0))},h=()=>{c&&(c.hidden=!0,document.body.classList.remove("search-open"))},v=async()=>{if(l)return;u=await(await fetch("/search.json")).json(),l=(await E())(function(){this.ref("slug"),this.field("title"),this.field("description"),this.field("tags"),this.field("category"),u.forEach(n=>this.add(n))})},A=async e=>{if(!r)return[];if(await v(),!l)return[];const n=l.search(e).slice(0,25).map(a=>u.find(d=>d.slug===a.ref)).filter(a=>!!a);return r.innerHTML=k(n),n},f=e=>{if(!r)return;const t=Array.from(r.querySelectorAll("[data-search-item]"));t.length!==0&&(s=(s+e+t.length)%t.length,t.forEach((n,a)=>{n.classList.toggle("is-active",a===s)}),t[s].scrollIntoView({block:"nearest"}))},C=()=>{if(!r)return;const e=Array.from(r.querySelectorAll("[data-search-item]"));e.length===0||s<0||e[s].click()},S=e=>{if((e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="k"){e.preventDefault(),p();return}if(e.key==="Escape"){h();return}!c||c.hidden||((e.key==="ArrowDown"||e.key.toLowerCase()==="j")&&(e.preventDefault(),f(1)),(e.key==="ArrowUp"||e.key.toLowerCase()==="k")&&(e.preventDefault(),f(-1)),e.key==="Enter"&&(e.preventDefault(),C()))};i&&i.addEventListener("input",e=>{const t=e.target.value.trim();if(t.length===0){s=-1,r&&(r.innerHTML='<p class="search-empty">Type something and hit Enter. Or just panic.</p>');return}A(t).then(()=>{s=-1,r&&r.querySelectorAll("[data-search-item]").forEach(a=>a.classList.remove("is-active"))})});w.forEach(e=>e.addEventListener("click",h));g?.addEventListener("click",p);document.addEventListener("keydown",S);document.addEventListener("click",e=>{const t=e.target;(t.matches("[data-search-close]")||t.closest("[data-search-close]"))&&h()});const j=document.documentElement;j.classList.add("js-enabled");</script> </body> </html>  